{% extends "shop/shop_base.html" %}
{% load static bootstrap4 %}
{% load render_table querystring from django_tables2 %}

{% block content %}
  <div id="allow_update" style="display: none">{{ allow_update }}</div>
  <div id="allow_detail" style="display: none">{{ allow_detail }}</div>

  {% if filter %}
    {{ filter.form.media }}
    {% if filter_left %}
      <div class="container-fluid" style="height: calc(100% - 60px);">
        <div class="row h-100">
          <div class="col col-md-3 col-lg-2 m-0 p-0">
            <div class="h-100 d-flex flex-column">
              <div class="bg-light p-3 text-center" style="height:72px;"><h3>{{ heading }}</h3></div>
              <div class="panel flex-grow-1 bg-guest-light">
                <form action="." method="get" id="id_filter_form">
                  {% for field in filter.form.visible_fields %}
                    {% if field.name == 'per_page' %}<div style="display: none">{% bootstrap_field field %}</div>
                    {% else %}{% bootstrap_field field form_group_class="form-group auto-submit" %}{% endif %}
                  {% endfor %}
{#                  <button class="form-control btn-primary " id="id_search" type="submit">#}
{#                    <i class="fas fa-filter"></i>&nbsp&nbsp Filter#}
{#                  </button>#}
                </form>
              </div>
            </div>
          </div>
          <div class="col col-md-9 col-lg-10 ml-0 bg-light">
            <div class="row flex-grow-1">
              {% include 'table_data.html' with heading="" %}
            </div>
          </div>
        </div>
      </div>
    {% else %} <!-- filter at top -->
      <div class="container-fluid p-0 bg-guest-light" style="height: calc(100% - 60px);">
        <div class="panel bg-guest-light">
        <div class="bg-dark p-3 text-center" style="height:72px;"><h3 class="text-white">{{ heading }}</h3></div>
        <form action="." method="get" id="search_form">
          <div class="row">
            {% for field in filter.form.visible_fields %}
              <div class="col col-md-2">
                {% bootstrap_field field %}
              </div>
            {% endfor %}
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">
              <div class="form-group">
                <label for="id_search">&nbsp;</label>
                <button class="form-control btn-primary " id="id_search" type="submit">
                  <i class="fas fa-filter"></i>&nbsp&nbsp Filter
                </button>
              </div>
            </div>
          </div>
        </form>
          <div class="h-100 d-flex flex-column">
          <div class="col bg-light h-100">
            <div class="row flex-grow-1">
              {% include 'table_data.html' %}
            </div>
          </div>
          </div>
        </div>
      </div>
    {% endif %}
  {% else %} <!-- No filter -->
    <div class="container-fluid bg-guest-light">
      <div class="panel">
        {% include "table_data.html" %}

      </div>
    </div>
  {% endif %}

  <!-- Modal to hold partial form -->
  <div class="modal " data-backdrop="static" data-keyboard="false" id="modal-form" role="dialog">
    <div class="modal-dialog modal-dialog-centered {{ modal_class }}" role="document">
      <div class="modal-content bg-light">
      </div>
    </div>
  </div>

  <!-- Modal to confirm -->
  <div class="modal fade" data-backdrop="static" data-keyboard="false" id="modal-confirm" role="dialog"
       style="top:250px;">
  <div class="modal-dialog" role="document">
    <div class="modal-content bg-warning">
      <div class="modal-body">
        <p>Are you sure?</p>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger js-delete" data-dismiss="modal">Delete</button>
      </div>
    </div>
  </div>

{% endblock %}
{% block custom_scripts %}
  <script src="{% static "shop/js/table_handler.js" %}"></script>
{% endblock %}